<?xml version="1.0" encoding="UTF-8"?>
 
<jira-database-config>
  <name>defaultDS</name>
  <delegator-name>default</delegator-name>
  <database-type><%= scope.lookupvar('jira::dbtype') %></database-type>
  <schema-name><%= scope.lookupvar('jira::dbschema') %></schema-name>
  <jdbc-datasource>
    <url><%= scope.lookupvar('jira::dburl_real') %></url>
    <driver-class><%= scope.lookupvar('jira::dbdriver') %></driver-class>
    <username><%= scope.lookupvar('jira::dbuser') %></username>
    <password><%= scope.lookupvar('jira::dbpassword') %></password>
    <pool-size><%= scope.lookupvar('jira::poolsize') %></pool-size>
<% if @enable_connection_pooling -%>
    <pool-min-size><%= scope.lookupvar('jira::pool_min_size') %></pool-min-size>
    <pool-max-size><%= scope.lookupvar('jira::pool_max_size') %></pool-max-size>
    <pool-max-wait><%= scope.lookupvar('jira::pool_max_wait') %></pool-max-wait>
    <validation-query><% if @validation_query %><%= @validation_query %><% else %>scope.lookupvar('jira::validation_query')<% end %></validation-query>
    <min-evictable-idle-time-millis><%= scope.lookupvar('jira::min_evictable_idle_time') %></min-evictable-idle-time-millis>
    <time-between-eviction-runs-millis><% if @time_between_eviction_runs %><%= @time_between_eviction_runs %><% else %><%= scope.lookupvar('jira::time_between_eviction_runs') %><% end %></time-between-eviction-runs-millis>
    <pool-max-idle><%= scope.lookupvar('jira::pool_max_idle') %></pool-max-idle>
    <pool-remove-abandoned><%= scope.lookupvar('jira::pool_remove_abandoned') %></pool-remove-abandoned>
    <pool-remove-abandoned-timeout><%= scope.lookupvar('jira::pool_remove_abandoned_timeout') %></pool-remove-abandoned-timeout>
    <pool-test-while-idle><%= scope.lookupvar('jira::pool_test_while_idle') %></pool-test-while-idle>
    <pool-test-on-borrow><%= scope.lookupvar('jira::pool_test_on_borrow') %></pool-test-on-borrow>
<% end -%>
  </jdbc-datasource>
</jira-database-config>
